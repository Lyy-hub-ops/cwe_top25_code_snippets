void TraverseElements(pugi::xml_node node, std::function<void(pugi::xml_node)> callback) {
  // cannot use ranged loop here because we need to store the next_sibling before recursion so that if child was removed
  // the loop won't be terminated
  for (pugi::xml_node child = node.first_child(), next; child; child = next) {
    next = child.next_sibling();
    TraverseElements(child, callback);
  }

  callback(node);
}