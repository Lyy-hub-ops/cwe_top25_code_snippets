private JsonArray readArray() throws IOException {
    read();
    JsonArray array=new JsonArray();
    skipWhiteSpace();
    if (readIf(']')) {
      return array;
    }
    while (true) {
      skipWhiteSpace();
      array.add(readValue());
      skipWhiteSpace();
      if (readIf(',')) skipWhiteSpace(); // , is optional
      if (readIf(']')) break;
      else if (isEndOfText()) throw error("End of input while parsing an array (did you forget a closing ']'?)");
    }
    return array;
  }